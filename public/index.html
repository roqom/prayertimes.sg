<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Prayer Times - Singapore</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #f7f7f7; }
    h1 { color: #0070c9; }
    ul { list-style: none; padding: 0; }
    li { margin-bottom: 0.8rem; }
    .error { color: #d32f2f; background: #ffebee; padding: 1rem; border-radius: 4px; }
  </style>
</head>
<body>
  <h1>Singapore Prayer Times</h1>
  <ul id="times">Loading...</ul>

<script>
  fetch('/api/prayer-times')
    .then(res => {
      if (!res.ok) {
        throw new Error(`HTTP ${res.status}: ${res.statusText}`);
      }
      return res.json();
    })
    .then(data => {
      const ul = document.getElementById('times');
      ul.innerHTML = '';

      const today = new Date();
      const day = String(today.getDate()).padStart(2, '0');
      const month = String(today.getMonth() + 1).padStart(2, '0');
      const year = today.getFullYear();
      const todayStr = `${year}-${month}-${day}`; // âœ… Fixed: match API format

      const todayData = data.find(item => item.date === todayStr);

      if (todayData) {
        const li = document.createElement('li');
        li.innerHTML = `<strong>${todayData.date}</strong><br>
          Subuh: ${todayData.subuh}<br>
          Syuruk: ${todayData.syuruk}<br>
          Zuhur: ${todayData.zuhur}<br>
          Asar: ${todayData.asar}<br>
          Maghrib: ${todayData.maghrib}<br>
          Isyak: ${todayData.isyak}`;
        ul.appendChild(li);
      } else {
        ul.innerHTML = `<li class="error">No data found for today (${todayStr}).</li>`;
      }
    })
    .catch(err => {
      const ul = document.getElementById('times');
      ul.innerHTML = `<li class="error">Failed to load prayer times.<br>Error: ${err.message}</li>`;
      console.error('Prayer times fetch error:', err);
    });
</script>

</body>
</html>
